<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</head>
	<div th:replace="Principal/Header.html::header"></div>
<body>

	<div class="container mt-4">
        <h1>Lista de Empleados</h1>

		<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#empleadoModal">
			&#9757 Agregar
		</button>

		<a th:href="@{/empleadocontroller/create}" class="btn btn-danger btn-sm">nuevo</a>

		<table class="table table-striped mt-4 ">
			<thead class="thead-dark" style="background-color: #273746; color: #F1C40F;">
				<tr>
					<th>Nombre</th>
                    <th>Apellidos</th>
                    <th>Dni</th>
                    <th>Telefono</th>
                    <th>Rol</th>
                    <th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="temp : ${empleados}" th:if="${temp != null}" >
					<td th:text="${temp.nombres}"></td>
					<td th:text="${temp.apellidos}"></td>
					<td th:text="${temp.dni}"></td>
                    <td th:text="${temp.telefono}"></td>
                    <td th:text="${temp.rol}"></td>
					<td> 
						<button type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#empleadoModalEdit"
                            th:data-id="${temp.id}"
                            th:data-1="${temp.nombres}"
                            th:data-2="${temp.apellidos}"
                            th:data-3="${temp.dni}"
                            th:data-4="${temp.telefono}"
                            th:data-5="${temp.rol}">
                            &#9999 
                        </button> &nbsp;
						<a th:href="@{/empleadocontroller/delete/{id}(id=${temp.id})}" class="btn btn-danger btn-sm">&#9851</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	
	<div th:replace="Empleados/EmpleadoEdit.html :: formularioedit"></div>
    <div th:replace="Empleados/EmpleadoForm.html :: formulario"></div>

</body>
</html>


<script>
	document.addEventListener('DOMContentLoaded', function() {
		const modal = document.getElementById('empleadoModalEdit');
		modal.addEventListener('show.bs.modal', function(event) {
			const button = event.relatedTarget; 
			document.getElementById('id').value = button.getAttribute('data-id');
			document.getElementById('nombre').value = button.getAttribute('data-1');   
			document.getElementById('apellido').value = button.getAttribute('data-2');
			document.getElementById('dni').value = button.getAttribute('data-3');
            document.getElementById('telefono').value = button.getAttribute('data-4');
            document.getElementById('rol').value = button.getAttribute('data-5');
        });
	});


	

</script>
